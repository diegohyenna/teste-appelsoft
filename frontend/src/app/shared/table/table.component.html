<div *ngIf="filterInputs?.length">
  <h3>Filtros</h3>
  <div class="filters">
    <app-input
      *ngFor="let input of filterInputs"
      [validators]="[input.validators]"
      [label]="input.label"
      [value]="input.inputModel.value"
      [placeholder]="input.placeholder"
      [formErrors]="input.formErrors"
      [(ngModel)]="input.inputModel.value"
      (keydown.enter)="filter()"
    ></app-input>
    <button mat-icon-button (click)="filter()">
      <mat-icon class="mat-18">search</mat-icon>
    </button>
  </div>
</div>
<button
  *ngIf="addCreateButton"
  mat-raised-button
  class="create-button"
  color="primary"
  (click)="handleCreate()"
>
  Criar transação
</button>
<div class="container mat-elevation-z8">
  <div class="loading-shade" *ngIf="isLoading[this.tableDataAttr.type]">
    <mat-spinner *ngIf="isLoading[this.tableDataAttr.type]"></mat-spinner>
  </div>
  <div class="table-container">
    <table
      mat-table
      [dataSource]="tableData[this.tableDataAttr.type]"
      class="table"
      matSort
      matSortActive="created"
      matSortDisableClear
      matSortDirection="desc"
      (matSortChange)="order($event)"
    >
      <ng-container
        *ngFor="let tableColumn of tableColumns"
        [matColumnDef]="tableColumn.attr"
      >
        <th
          mat-header-cell
          *matHeaderCellDef
          mat-sort-header
          sortActionDescription="Ordenar por {{ tableColumn.label }}"
        >
          {{ tableColumn.label }}
        </th>

        <td mat-cell *matCellDef="let row">
          <ng-container
            *ngIf="
              tableColumn.pipeName && tableColumn.attr !== 'acoes';
              else item2
            "
          >
            {{
              row[tableColumn.attr]
                | dynamicPipe : tableColumn.pipeName : tableColumn.pipeArgs
            }}</ng-container
          >
          <ng-template #item2>
            <ng-container
              *ngIf="
                !tableColumn.pipe && tableColumn.attr !== 'acoes';
                else item3
              "
            >
              {{ row[tableColumn.attr] }}
            </ng-container>
          </ng-template>
          <ng-template #item3>
            <div class="container-actions">
              <button mat-icon-button (click)="handleEdit(row)">
                <mat-icon color="primary" class="mat-18">edit</mat-icon>
              </button>
              <button mat-icon-button (click)="handleDelete(row)">
                <mat-icon color="warn" class="mat-18">delete</mat-icon>
              </button>
            </div>
          </ng-template>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="columns"></tr>
      <tr mat-row *matRowDef="let row; columns: columns"></tr>
    </table>
  </div>

  <mat-paginator
    [length]="total"
    [pageSize]="size"
    aria-label="Pagina de entregas"
    (page)="handlePageEvent($event)"
  ></mat-paginator>
</div>
